"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[137],{137:(e,s,t)=>{t.r(s),t.d(s,{default:()=>k});var a=t(5043),n=t(2019),r=t(6399),i=t(5492),l=t(647),d=t(9073),c=t(7419),o=t(1645),u=t(5444),m=t(8444),h=t(3463),x=t(3245);var p=t(3427),A=t(3913),j=t(4040),y=t(3003),g=t(579);const b=function(e){const[s]=p.A.useForm(),{userData:t}=(0,y.d4)((e=>e.userSlice)),{visible:r,hideModal:i,title:l,loadData:d}=e;return(0,a.useEffect)((()=>{"Add Enterprise"==l?s.resetFields():s.setFieldsValue(t)}),[r]),(0,g.jsx)(g.Fragment,{children:(0,g.jsx)(A.A,{title:l,open:r,onCancel:i,width:800,onOk:()=>{s.validateFields().then((async e=>{const{data:s}=await function(e){return(0,x.b)("/editUser",e)}(e);n.Ay.success(s),i(),d()})).catch((e=>{console.log(e)}))},children:(0,g.jsxs)(p.A,{form:s,labelCol:{span:8},wrapperCol:{span:16},children:[(0,g.jsxs)(c.A,{gutter:16,children:[(0,g.jsx)(o.A,{span:12,children:(0,g.jsx)(p.A.Item,{label:"Customer Name",name:"name",rules:[{required:!0,message:"Customer name cannot be empty"}],children:(0,g.jsx)(u.A,{})})}),(0,g.jsx)(o.A,{span:12,children:(0,g.jsx)(p.A.Item,{label:"Contact Number",name:"tel",rules:[{required:!0,message:"Contact number cannot be empty"},{pattern:/^1[3-9]\d{9}$/,message:"Please enter a valid phone number"}],children:(0,g.jsx)(u.A,{})})})]}),(0,g.jsxs)(c.A,{gutter:16,children:[(0,g.jsx)(o.A,{span:12,children:(0,g.jsx)(p.A.Item,{label:"Business Status",name:"status",rules:[{required:!0,message:"Business status cannot be empty"}],children:(0,g.jsxs)(j.Ay.Group,{children:[(0,g.jsx)(j.Ay,{value:"1",children:"Operating"}),(0,g.jsx)(j.Ay,{value:"2",children:"Suspended"}),(0,g.jsx)(j.Ay,{value:"3",children:"Closed"})]})})}),(0,g.jsx)(o.A,{span:12,children:(0,g.jsx)(p.A.Item,{label:"Industry",name:"business",rules:[{required:!0,message:"Industry cannot be empty"}],children:(0,g.jsx)(u.A,{})})})]}),(0,g.jsxs)(c.A,{gutter:16,children:[(0,g.jsx)(o.A,{span:12,children:(0,g.jsx)(p.A.Item,{label:"Email",name:"email",rules:[{required:!0,message:"Email cannot be empty"}],children:(0,g.jsx)(u.A,{})})}),(0,g.jsx)(o.A,{span:12,children:(0,g.jsx)(p.A.Item,{label:"Unified Credit Code",name:"creditCode",rules:[{required:!0,message:"Unified credit code cannot be empty"}],children:(0,g.jsx)(u.A,{})})})]}),(0,g.jsxs)(c.A,{gutter:16,children:[(0,g.jsx)(o.A,{span:12,children:(0,g.jsx)(p.A.Item,{label:"Business Registration Number",name:"industryNum",rules:[{required:!0,message:"Business registration number cannot be empty"}],children:(0,g.jsx)(u.A,{})})}),(0,g.jsx)(o.A,{span:12,children:(0,g.jsx)(p.A.Item,{label:"Organization Code",name:"organizationCode",rules:[{required:!0,message:"Organization code cannot be empty"}],children:(0,g.jsx)(u.A,{})})})]}),(0,g.jsx)(c.A,{gutter:16,children:(0,g.jsx)(o.A,{span:12,children:(0,g.jsx)(p.A.Item,{label:"Legal Representative",name:"legalPerson",rules:[{required:!0,message:"Legal representative cannot be empty"}],children:(0,g.jsx)(u.A,{})})})})]})})})};var C=t(8817);const N=a.memo(b),k=function(){const[e,s]=(0,a.useState)([]),[t,p]=(0,a.useState)(1),[A,j]=(0,a.useState)(10),[b,k]=(0,a.useState)(0),[v,I]=(0,a.useState)(!1),[f,S]=(0,a.useState)([]),[w,E]=(0,a.useState)(!1),[z,q]=(0,a.useState)(""),B=(0,y.wA)(),[D,F]=(0,a.useState)({companyName:"",contact:"",phone:""}),O=(0,a.useMemo)((()=>!f.length),[f]);(0,a.useEffect)((()=>{R()}),[t,A]);const R=async()=>{I(!0);const{data:{list:e,total:a}}=await(n={...D,page:t,pageSize:A},(0,x.b)("/userList",n));var n;I(!1),s(e),k(a)},U=e=>{const{name:s,value:t}=e.target;F((e=>({...e,[s]:t})))},P={selectedRowKeys:f,onChange:e=>{S(e)}},L=async function(e){const{data:s}=await function(e){return(0,x.b)("/deleteUser",{id:e})}(e);n.Ay.success(s),R()},T=(0,a.useCallback)((()=>{E(!1)}),[]),M=[{title:"No.",key:"index",render:(e,s,t)=>t+1},{title:"Customer Name",key:"name",dataIndex:"name"},{title:"Business Status",key:"status",dataIndex:"status",render:e=>1==e?(0,g.jsx)(r.A,{color:"green",children:"Operating"}):2==e?(0,g.jsx)(r.A,{color:"#f50",children:"Suspended"}):3==e?(0,g.jsx)(r.A,{color:"red",children:"Closed"}):void 0},{title:"Contact Number",key:"tel",dataIndex:"tel"},{title:"Industry",key:"business",dataIndex:"business"},{title:"Email",key:"email",dataIndex:"email"},{title:"Unified Credit Code",key:"creditCode",dataIndex:"creditCode"},{title:"Business Registration Number",key:"industryNum",dataIndex:"industryNum"},{title:"Organization Code",key:"organizationCode",dataIndex:"organizationCode"},{title:"Legal Representative",key:"legalPerson",dataIndex:"legalPerson"},{title:"Action",key:"operate",render:(e,s,t)=>(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(i.Ay,{type:"primary",size:"small",onClick:()=>(e=>{E(!0),q("Edit Enterprise"),B((0,C.sX)(e))})(s),children:"Edit"}),(0,g.jsx)(l.A,{title:"Delete Confirmation",description:"Are you sure you want to delete?",okText:"Yes",cancelText:"No",onConfirm:()=>L(s.id),children:(0,g.jsx)(i.Ay,{type:"primary",danger:!0,className:"ml",size:"small",children:"Delete"})})]})}];return(0,g.jsxs)("div",{className:"users",children:[(0,g.jsx)(N,{visible:w,hideModal:T,title:z,loadData:R}),(0,g.jsx)(d.A,{className:"search",children:(0,g.jsxs)(c.A,{gutter:16,children:[(0,g.jsxs)(o.A,{span:7,children:[(0,g.jsx)("p",{children:"Enterprise Name:"}),(0,g.jsx)(u.A,{name:"companyName",value:D.companyName,onChange:U})]}),(0,g.jsxs)(o.A,{span:7,children:[(0,g.jsx)("p",{children:"Contact Person:"}),(0,g.jsx)(u.A,{name:"contact",value:D.contact,onChange:U})]}),(0,g.jsxs)(o.A,{span:7,children:[(0,g.jsx)("p",{children:"Contact Number:"}),(0,g.jsx)(u.A,{name:"phone",value:D.phone,onChange:U})]}),(0,g.jsxs)(o.A,{span:3,children:[(0,g.jsx)(i.Ay,{type:"primary",onClick:R,children:"Search"}),(0,g.jsx)(i.Ay,{className:"ml",onClick:()=>{S([]),F({companyName:"",contact:"",phone:""}),p(1),j(10),R()},children:"Reset"})]})]})}),(0,g.jsxs)(d.A,{className:"mt tr",children:[(0,g.jsx)(i.Ay,{type:"primary",onClick:()=>{E(!0),q("Add Enterprise"),B((0,C.sX)({}))},children:"Add Enterprise"}),(0,g.jsx)(i.Ay,{danger:!0,type:"primary",className:"ml",disabled:O,onClick:async()=>{const{data:e}=await(s=f,(0,x.b)("/batchDeleteUser",{ids:s}));var s;n.Ay.success(e),R()},children:"Batch Delete"})]}),(0,g.jsxs)(d.A,{className:"mt",children:[(0,g.jsx)(m.A,{columns:M,dataSource:e,rowKey:e=>e.id,loading:v,rowSelection:P,pagination:!1}),(0,g.jsx)(h.A,{className:"fr mt",total:b,current:t,pageSize:A,showSizeChanger:!0,showQuickJumper:!0,showTotal:e=>"Total ".concat(e," items"),onChange:(e,s)=>{p(e),j(s)}})]})]})}}}]);
//# sourceMappingURL=137.218a72ea.chunk.js.map