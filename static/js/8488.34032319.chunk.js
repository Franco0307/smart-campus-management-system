"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[8488],{6606:(e,t,a)=>{a.d(t,{A:()=>s});var n=a(5043);const s=function(e,t){const[a,s]=(0,n.useState)([]),[i,r]=(0,n.useState)(1),[l,o]=(0,n.useState)(10),[c,d]=(0,n.useState)(0),[m,u]=(0,n.useState)(!1),[y,h]=(0,n.useState)(e),p=(0,n.useCallback)((async()=>{u(!0);try{const{data:{list:e,total:a}}=await t({page:i,pageSize:l,...y});s(e),d(a)}catch(e){console.log(e)}finally{u(!1)}}),[y,i,l,t]);return(0,n.useEffect)((()=>{p()}),[p]),{dataList:a,page:i,pageSize:l,total:c,loading:m,formData:y,setDataList:s,setPage:r,setPageSize:o,setTotal:d,setLoading:u,setFormData:h,loadData:p,onChange:(e,t)=>{r(e),o(t)},handleChange:e=>{const{name:t,value:a}=e.target;h((e=>({...e,[t]:a})))},reset:()=>{r(1),o(10),h(e)}}}},8488:(e,t,a)=>{a.r(t),a.d(t,{default:()=>f});var n=a(5492),s=a(647),i=a(9073),r=a(7419),l=a(1645),o=a(5444),c=a(5432),d=a(8444),m=a(3463),u=a(2745),y=a(6606),h=a(5043),p=a(3003),g=a(579);const k=function(e,t){return function(a){return function(n){return e.every((e=>t.includes(e)))?(0,g.jsx)(a,{...n}):null}}},x=[{title:"Dashboard",key:"/dashboard"},{title:"Tenant Management",key:"/users",children:[{title:"Tenant List",key:"/users/list"},{title:"Add Tenant",key:"/users/add"}]},{title:"Property Management",key:"/estate",children:[{title:"Building Management",key:"/estate/tenement"},{title:"Room Management",key:"/estate/room"},{title:"Vehicle Information",key:"/estate/car"}]},{title:"Repair Management",key:"/repair"},{title:"Finance Management",key:"/finance",children:[{title:"Contract Management",key:"/finance/contract"},{title:"Contract Details",key:"/finance/surrender"},{title:"Bill Management",key:"/finance/bill"}]},{title:"Investment Management",key:"/merchants"},{title:"Operation Management",key:"/operation",children:[{title:"Operation Overview",key:"/operation/all"},{title:"Article Publishing",key:"/operation/article"},{title:"Content Comments",key:"/operation/comments"}]},{title:"Equipment Management",key:"/equipment"},{title:"Energy Consumption",key:"/energy"},{title:"System Settings",key:"/settings"},{title:"Personal Center",key:"/personal"}];function A(e){let t=[];return e.forEach((e=>{if(e.children&&e.children.length>0){const a=A(e.children);t=t.concat(a)}else t.push(e.key)})),t}const f=function(){const e=k(["delete"],JSON.parse(sessionStorage.getItem("btnAuth")))(n.Ay),t=[{title:"No.",key:"index",render:(e,t,a)=>a+1},{title:"Account Name",dataIndex:"accountName",key:"accountName"},{title:"Permission Role",dataIndex:"auth",key:"auth"},{title:"User",dataIndex:"person",key:"person"},{title:"User Phone",dataIndex:"tel",key:"tel"},{title:"Department",dataIndex:"department",key:"department"},{title:"Action",key:"operate",render:(t,a)=>(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(n.Ay,{size:"small",type:"primary",className:"mr",onClick:()=>((e,t)=>{f(t);const a=A(e);C(a)})(a.menu,a.accountName),children:"Modify Permission"}),(0,g.jsx)(s.A,{title:"Operation Prompt",description:"Are you sure you want to delete this account?",okText:"Yes",cancelText:"No",children:(0,g.jsx)(e,{size:"small",type:"primary",danger:!0,children:"Delete Account"})})]})}],[a,f]=(0,h.useState)("Current User"),{menuList:j}=(0,p.d4)((e=>e.authSlice)),[S,C]=(0,h.useState)([]),{dataList:N,page:P,pageSize:D,total:M,loading:b,formData:v,setDataList:T,setPage:w,setPageSize:z,setTotal:I,setLoading:L,setFormData:O,loadData:E,onChange:F,handleChange:R,reset:U}=(0,y.A)({accountName:""},u.aN);return(0,h.useEffect)((()=>{C(A(j))}),[]),(0,g.jsxs)("div",{children:[(0,g.jsx)(i.A,{children:(0,g.jsxs)(r.A,{gutter:16,children:[(0,g.jsx)(l.A,{span:8,children:(0,g.jsx)(o.A,{name:"accountName",value:v.accountName,placeholder:"Please enter account name",onChange:R})}),(0,g.jsx)(l.A,{span:8,children:(0,g.jsx)(n.Ay,{type:"primary",children:" Search"})}),(0,g.jsx)(l.A,{span:8,className:"tr",children:(0,g.jsx)(n.Ay,{type:"primary",children:"Create Account"})})]})}),(0,g.jsxs)(r.A,{gutter:16,className:"mt",children:[(0,g.jsxs)(l.A,{span:8,children:[(0,g.jsx)(i.A,{title:a+": Permissions",children:(0,g.jsx)(c.A,{checkable:!0,treeData:x,checkedKeys:S,onCheck:e=>{C(e)}})}),(0,g.jsx)(i.A,{className:"mt",children:(0,g.jsx)(s.A,{title:"Operation Prompt",description:"Are you sure you want to modify permissions for ".concat(a,"?"),okText:"Yes",cancelText:"No",onConfirm:()=>{console.log(S,a)},children:(0,g.jsx)(n.Ay,{type:"primary",children:"Submit Changes"})})})]}),(0,g.jsx)(l.A,{span:16,children:(0,g.jsxs)(i.A,{children:[(0,g.jsx)(d.A,{loading:b,columns:t,dataSource:N,rowKey:e=>e.id,pagination:!1}),(0,g.jsx)(m.A,{className:"fr mr",showQuickJumper:!0,total:M,current:P,pageSize:D,onChange:F})]})})]})]})}}}]);
//# sourceMappingURL=8488.34032319.chunk.js.map